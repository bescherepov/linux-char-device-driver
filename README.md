# linux-symbol-driver
Символьный драйвер, позволяющий передавать информацию двум независимым процессам по принципу кольцевого буфера

## Файлы исходного кода
`scdrv.c` - основной файл с инициализацией модуля

`driver.c` - структура драйвера и функции для него, а также файловые операции

`buffer.c` - код, отвечающий за основную структуру данных драйвера - кольцевого буфера "ringbuffer" - и функции работы с ним

## Сборка и установка
Перед установкой модуля необходимо либо отключить Secure Boot, либо подписать модуль внешними средствами

`# sudo ./build_and_install.sh`

Проверить установку модуля можно увидев в dmesg сообщения "Initializing scdrv module"

## TODO
Применение функционала обеспечения получения информации о времени последней операции чтения и записи в буфер, а так же идентификаторов и владельцев процессов совершивших эту операцию;

Переключение режима работы вызовов read\write из блокирующих \ не блокирующих и обратно (логика прописана, осталось реализовать активацию переключения);

Обеспечение возможности задавать размер кольцевого буфера через механизм параметров модулей ядра (осталось реализовать ввод с параметра);

Тестирование (на основной машине возникли проблемы с нахождением некоторых нужных библиотек, хотя расчётно сборка должна выполняться);

Оформление документации;

Сборка вне дерева исходных кодов ядра при помощи Makefile (на данный момент используются исходный код ядра на машине). 

## Задача
Реализовать символьный драйвер предлагающий возможность передавать информацию двум независимым процессам 
через файл символьного устройства: 
- взаимодействие должно осуществляться по принципу кольцевого буфера;  т.е. один процесс может писать в файл символьного устройства, а другой из него читать. 
- обеспечить возможность задавать размер кольцевого буфера через механизм параметров модулей ядра; 
- по умолчанию вызовы чтения и записи должны быть блокирующими; 
- обеспечить поддержку нескольких вызовов IOCTL: 
-- переключение режима работы вызовов read\write из блокирующих \ не блокирующих и обратно;
-- обеспечить возможность получения информации о времени последней операции чтения и записи в буфер, а так же идентификаторов и владельцев процессов совершивших эту операцию;

- драйвер должен собираться вне дерева исходных кодов ядра при помощи Makefile; 
- исходные коды драйвера должны находиться под системой контроля версий git и содержать историю коммитов; 
- результат передаётся в виде ссылки на репозиторий размещённый на github или в виде архива содержащего репозиторий с исходными кодами.
